---
import PrendreRendezVousButtonHome from "./PrendreRendezVousButtonHome.astro";

// FAQ Accordion Component pour Astro
// FAQAccordion.astro
const faqItems = [
  {
    question: "Faut-il prendre rendez-vous avant de venir ?",
    answer: `Oui, nous recevons uniquement sur rendez-vous. Pour découvrir mes selections de robes , vous pouvez consulter mon site, puis prendre rendez-vous pour un essayage.`,
  },

  {
    question: "Comment se déroule le premier rendez-vous ?",
    answer: `Votre rendez-vous se déroule dans notre showroom privé à Seysses, près de Toulouse, dans une atmosphère intime et chaleureuse. Lors de ce moment privilégié, nous échangerons sur :
      • Vos inspirations et le style recherché
      • Votre budget (nos robes sont disponibles entre 750€ et 1850€)
      • Vos contraintes de date
      • Vos préférences en termes de style
      
      Chaque essayage est une expérience unique où vous êtes notre seule priorité.`,
  },
  {
    question: "Que faut-il prévoir pour l'essayage ?",
    answer: `Avant votre essayage, pensez à :

Pas besoin de soutien-gorge : les robes sont dotées de coques intégrées

Pour le bas : un slip couleur chair

Apporter vos chaussures propres de mariage (ou une paire au talon équivalent)

Immortaliser l’essayage en photos, en gardant à l’esprit que chaque modèle pourra être ajusté`,
  },
  {
    question: "Quelles sont les modalités de paiement ?",
    answer: `Pour faciliter votre achat, nous proposons un paiement en trois fois :
      • 50% à la commande
      • 25% au premier essayage
      • 25% à la récupération de la robe
      
      `,
  },
  {
    question: "Combien de personnes puis je faire venir ?",
    answer: `Lors de votre premier essayage, moins c’est plus :

Un comité réduit : 4 personnes maximum, quelques visages familiers suffisent pour vous guider sans alourdir la prise de décision.

Des soutiens sincères : invitez des amis ou membres de la famille qui vous encouragent et vous conseillent en pensant à vous,  non pas imposer leurs goûts.

Ce jour-là, offrez-vous la paix intérieure qu’exige un choix si intime : confiez vos trésors de 1 à 9 ans à un proche pour vivre pleinement l’émotion pure de votre robe de mariée.
      
      `,
  },
  {
    question: "Puis-je venir avec mes enfants ?",
    answer: `Ce jour-là, offrez-vous la paix intérieure qu’exige un choix si intime : confiez vos trésors de 1 à 9 ans à un proche, car, à cet âge, ils s’impatientent très vite, et vivez pleinement l’émotion pure de votre robe de mariée.`,
  },
  {
    question:
      "Quelles collections de robes de mariée proposez-vous à Toulouse ?",
    answer: `Notre boutique près de Toulouse propose une sélection soigneusement choisie de robes de mariée pour tous les styles :
      • Robes de mariée princesse comme nos modèles Emil et Kapella, parmi nos best-sellers
      • Robes de mariée sirène, comme notre populaire modèle Vegas
      • Robes de mariée bohème chic, dont notre célèbre modèle Tina
      
      Chaque future mariée toulousaine peut trouver chez Monica Mariage la robe qui correspond à son style, sa silhouette et son budget. Notre expertise vous guide vers les modèles qui vous mettront particulièrement en valeur, adaptés spécialement à vos mesures.`,
  },
  {
    question:
      "Pourquoi choisir Monica Mariage pour sa robe de mariée à Toulouse ?",
    answer: `Depuis 2014, Monica Mariage s'est imposée comme une référence pour les futures mariées de Toulouse et sa région pour plusieurs raisons :
      • Un showroom privé et intimiste où chaque mariée est reçue individuellement
      • Une expertise reconnue dans le conseil et l'adaptation des robes à chaque morphologie
      • Des robes personnalisables et réalisées à vos mesures exactes
      • Un rapport qualité-prix exceptionnel avec des robes entre 750€ et 1850€
      • Une approche chaleureuse où "chaque mariée est traitée comme une reine"
      
      Notre boutique située à Seysses, facilement accessible depuis Toulouse, vous offre une expérience sur-mesure loin de l'agitation des grands salons, pour que la recherche de votre robe reste un moment magique et privilégié.`,
  },
];
---

<section class="py-12 bg-gradient-to-b from-white to-[#FDE9E6]" client:idle>
  <div class="container mx-auto px-4 max-w-6xl">
    <!-- En-tête avec icône et titre -->
    <div class="flex flex-col items-center mb-8">
      <!-- Icône FAQ -->
      <div
        class="w-20 h-20 mb-6 flex items-center justify-center bg-[#FDF8F7] rounded-full border-2 border-[#F0E6E2] shadow-sm"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="36"
          height="36"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#B68E75"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
      </div>

      <!-- Titre principal avec police script -->
      <h2
        class="font-vibes text-center text-4xl md:text-5xl text-[#af7749] mb-2"
      >
        Questions Fréquentes
      </h2>

      <!-- Sous-titre décoratif -->
      <div class="flex items-center justify-center gap-4 mb-8">
        <span class="h-px w-12 bg-[#C5A880]"></span>
        <p class="text-[#8B7569] text-sm text-center font-medium">
          TOUT CE QUE VOUS DEVEZ SAVOIR
        </p>
        <span class="h-px w-12 bg-[#C5A880]"></span>
      </div>
    </div>

    <!-- Section des accordéons FAQ -->
    <div class="max-w-3xl mx-auto">
      <div class="space-y-4" id="faq-accordion">
        {
          faqItems.map((item, index) => (
            <div class="bg-white rounded-lg overflow-hidden shadow-sm border border-[#F0E6E2] hover:shadow-md transition-all duration-300">
              <button
                class="w-full text-left px-6 py-5 text-[#5F4B3F] flex justify-between items-center faq-trigger"
                data-index={index}
                aria-expanded="false"
              >
                <span class="font-cormorant text-[#5F4B3F] font-medium text-lg">
                  {item.question}
                </span>
                <span class="w-8 h-8 flex items-center justify-center rounded-full bg-[#FDF8F7] border border-[#F0E6E2] text-[#af7749] transition-transform duration-300">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                  </svg>
                </span>
              </button>

              <div class="faq-content max-h-0 opacity-0 overflow-hidden transition-all duration-300">
                <div class="px-6 py-5 border-t border-[#F0E6E2] bg-[#FEFBFA]">
                  <p class="text-[#5F4B3F] whitespace-pre-line leading-relaxed font-lora text-lg">
                    {item.answer}
                  </p>
                </div>
              </div>
            </div>
          ))
        }
      </div>

      <!-- Bouton d'action -->
      <div class="text-center mt-10">
        <PrendreRendezVousButtonHome />
      </div>
    </div>
  </div>

  <script async defer>
    document.addEventListener("DOMContentLoaded", () => {
      const faqTriggers = document.querySelectorAll(".faq-trigger");

      faqTriggers.forEach((trigger) => {
        trigger.addEventListener("click", () => {
          const expanded = trigger.getAttribute("aria-expanded") === "true";
          const content = trigger.nextElementSibling;
          const icon = trigger.querySelector("span:last-child");

          // Fermer tous les autres accordéons
          faqTriggers.forEach((otherTrigger) => {
            if (
              otherTrigger !== trigger &&
              otherTrigger.getAttribute("aria-expanded") === "true"
            ) {
              otherTrigger.setAttribute("aria-expanded", "false");
              const otherContent = otherTrigger.nextElementSibling;
              const otherIcon = otherTrigger.querySelector("span:last-child");

              otherContent.style.maxHeight = "0";
              otherContent.style.opacity = "0";
              otherIcon.style.transform = "rotate(0deg)";
            }
          });

          // Ouvrir/fermer l'accordéon actuel
          if (expanded) {
            // Fermer
            trigger.setAttribute("aria-expanded", "false");
            content.style.maxHeight = "0";
            content.style.opacity = "0";
            icon.style.transform = "rotate(0deg)";
          } else {
            // Ouvrir
            trigger.setAttribute("aria-expanded", "true");
            content.style.maxHeight = content.scrollHeight + "px";
            content.style.opacity = "1";
            icon.style.transform = "rotate(45deg)";
          }
        });
      });
    });
  </script>
</section>
