---
// Importation des composants Astro
import { Icon } from "astro-icon/components";
import SocialIcons from "./SocialIcons.astro";
---

<header id="header" class="fixed top-0 w-full z-50 bg-[#FDE9E6] shadow-md">
  <!-- Barre de contact Mobile uniquement -->
  <div
    class="bg-[#A37B63] text-white text-sm py-2 px-4 flex justify-center lg:hidden"
  >
    <div class="flex items-center gap-2">
      <a
        href="https://wa.me/33668300960"
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-1"
      >
        <Icon name="mdi:whatsapp" class="text-2xl" />
      </a>
      <a
        href="https://wa.me/33668300960"
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-1 text-xl"
      >
        06 68 30 09 60
      </a>
      <a href="tel:+33668300960" class="flex items-center gap-1">
        <Icon name="mdi:phone" class="text-2xl" />
      </a>
    </div>
  </div>

  <!-- Navigation Desktop -->
  <nav
    class="hidden lg:flex bg-[#FDE9E6] items-center justify-between px-8 h-20"
  >
    <div class="flex items-center space-x-8">
      <a
        href="/"
        class="flex items-center gap-1 text-[#7A5C4B] hover:text-[#A37B63]"
      >
        <Icon name="mdi:home-outline" />
        Accueil
      </a>

      <!-- Dropdown pour "Robes de Mariée" -->
      <div class="relative group">
        <button class="text-[#7A5C4B] hover:text-[#A37B63] focus:outline-none">
          Robes de Mariée
        </button>
        <div
          class="absolute left-0 mt-2 w-48 bg-[#FDE9E6] shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"
        >
          <a
            href="/robes-de-mariee/forme-princesse"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Forme Princesse
          </a>
          <a
            href="/robes-de-mariee/style-boheme-chic"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Style Bohème Chic
          </a>
          <a
            href="/robes-de-mariee/forme-sirene"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Style Sirène
          </a>
          <a
            href="/robes-de-mariee/minimaliste"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Minimaliste
          </a>
        </div>
      </div>

      <!-- Dropdown pour "Promotions" -->
      <div class="relative group">
        <button class="text-[#7A5C4B] hover:text-[#A37B63] focus:outline-none">
          Promotions
        </button>
        <div
          class="absolute left-0 mt-2 w-48 bg-[#FDE9E6] shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"
        >
          <a
            href="/promo/promo-sirene"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Offre Spéciale
          </a>
          <a
            href="/promo/robes-de-mariee-promotion"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Flash Vente
          </a>
          <a
            href="/promo/robes-de-mariee-boheme-chic"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Promotion Festive
          </a>
          <a
            href="/promo/robes-de-mariees-destockage"
            class="block px-4 py-2 text-[#7A5C4B] hover:bg-[#A37B63] hover:text-white"
          >
            Destockage
          </a>
        </div>
      </div>

      <!-- Vous pouvez ajouter d'autres liens ici -->
      <!-- <a href="/toutes-nos-robes" class="text-[#7A5C4B] hover:text-[#A37B63]">Toutes nos robes</a> -->
    </div>

    <div
      class="absolute flex items-center text-center left-1/2 transform -translate-x-1/2"
    >
      <p class="text-[#7A5C4B] font-vibes italic text-4xl mr-2">
        MonicaMariage
      </p>
      <span class="text-[#7A5C4B] italic text-md">Since 2014</span>
    </div>

    <div class="flex items-center space-x-8">
      <a href="/prendre-rendez-vous">
        <button
          class="bg-[#7A5C4B] text-white hover:text-[#A37B63] transition-all duration-300 ease-in-out transform hover:scale-105 rounded-md py-2 px-4 shadow-lg"
        >
          Contactez Nous
        </button>
      </a>
      <a
        href="/trouver-le-showroom"
        class="text-[#7A5C4B] hover:text-[#A37B63]"
      >
        Trouver le showroom
      </a>
      <a href="/">
        <Icon
          name="mdi:heart"
          class="w-5 h-5 text-[#7A5C4B] hover:text-[#A37B63]"
        />
      </a>
    </div>
  </nav>

  <!-- Navigation Mobile -->
  <div
    class="lg:hidden z-60 bg-white shadow-md px-4 py-3 flex justify-between items-center"
  >
    <button
      id="mobileMenuBtn"
      class="text-[#7A5C4B] p-1 border border-[#7A5C4B] rounded-full"
    >
      <Icon name="mdi:menu" class="w-8 h-8 text-[28px]" />
    </button>
    <a href="/" class="font-vibes text-2xl text-[#7A5C4B]"> MonicaMariage </a>
    <div class="flex gap-4">
      <a href="/trouver-le-showroom">
        <Icon name="mdi:map-marker" class="text-[#7A5C4B]" />
      </a>
      <a href="/">
        <Icon name="mdi:heart" class="text-[#7A5C4B]" />
      </a>
    </div>
  </div>

  <!-- Menu Mobile Principal -->
  <div
    id="mobileMenu"
    class="fixed inset-0 bg-[#FDE9E6] z-50 p-4 flex flex-col items-center justify-center space-y-6 shadow-lg transform translate-y-full opacity-0 transition-all duration-500 ease-in-out"
  >
    <!-- Bouton de fermeture -->
    <button
      id="closeMobileMenu"
      class="border border-[#7A5C4B] rounded-full absolute top-4 right-4 text-[#7A5C4B]"
    >
      <Icon name="mdi:close" size="28px" />
    </button>

    <!-- Logo -->
    <div class="text-center w-full">
      <span
        class="text-[#7A5C4B] block mt-[10px] font-vibes italic text-[40px]"
      >
        MonicaMariage
      </span>
      <span
        class="mb-3 mt-[-10px] text-[#7A5C4B] text-[18px] block w-full text-center"
      >
        Since 2014
      </span>
    </div>

    <!-- Liens du Menu Mobile Principal -->
    <div
      class="flex flex-col items-center space-y-4 text-[#7A5C4B] text-xl w-full"
    >
      <a
        href="/"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <Icon name="mdi:home-outline" class="text-2xl" />
        <span>Accueil</span>
      </a>
      <!-- Bouton pour sous-menu "Robes de Mariée" -->
      <button
        id="openMobileSubmenu"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full text-left"
      >
        <Icon name="mdi:hanger" class="text-2xl" />
        <span>Robes de Mariée</span>
      </button>
      <!-- Bouton pour sous-menu "Promotions" -->
      <button
        id="openMobilePromoSubmenu"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full text-left"
      >
        <Icon name="mdi:percent-outline" class="text-2xl" />
        <span>Promotions</span>
      </button>
      <a
        href="/toutes-nos-robes"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <Icon name="mdi:human-female-dance" class="text-2xl" />
        <span>Toutes nos robes</span>
      </a>
      <a
        href="/prendre-rendez-vous"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <Icon name="mdi:calendar-check-outline" class="text-2xl" />
        <span>Prendre Rendez-Vous</span>
      </a>
      <a
        href="/trouver-le-showroom"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <Icon name="mdi:map-marker-outline" class="text-2xl" />
        <span>Trouver le showroom</span>
      </a>
    </div>

    <!-- Réseaux Sociaux -->
    <div class="flex gap-6 mt-6 text-[#7A5C4B] text-2xl">
      <a href="https://wa.me/33668300960" target="_blank">
        <Icon name="mdi:whatsapp" />
      </a>
      <a href="https://www.instagram.com" target="_blank">
        <Icon name="mdi:instagram" />
      </a>
      <a href="https://www.messenger.com" target="_blank">
        <Icon name="mdi:facebook-messenger" />
      </a>
      <a href="tel:+33668300960">
        <Icon name="mdi:phone" />
      </a>
    </div>
  </div>

  <!-- Sous-menu Mobile pour "Robes de Mariée" -->
  <div
    id="mobileSubmenu"
    class="fixed inset-0 bg-[#FDE9E6] z-50 p-4 flex flex-col items-center justify-start space-y-6 shadow-lg transform translate-x-full opacity-0 transition-all duration-500 ease-in-out"
  >
    <div class="w-full flex items-center mb-4">
      <button
        id="backToMainMenu"
        class="text-[#7A5C4B] p-1 border border-[#7A5C4B] rounded-full mr-4"
      >
        <Icon name="mdi:arrow-left" size="28px" />
      </button>
      <span class="text-[#7A5C4B] font-vibes italic text-2xl">
        Robes de Mariée
      </span>
    </div>
    <div class="flex flex-col items-start space-y-4 w-full">
      <a
        href="/robes-de-mariee/forme-princesse"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Forme Princesse</span>
      </a>
      <a
        href="/robes-de-mariee/style-boheme-chic"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Style Bohème Chic</span>
      </a>
      <a
        href="/robes-de-mariee/forme-sirene"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Style Sirène</span>
      </a>
      <a
        href="/robes-de-mariee/minimaliste"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Minimaliste</span>
      </a>
    </div>
  </div>

  <!-- Sous-menu Mobile pour "Promotions" -->
  <div
    id="mobilePromoSubmenu"
    class="fixed inset-0 bg-[#FDE9E6] z-50 p-4 flex flex-col items-center justify-start space-y-6 shadow-lg transform translate-x-full opacity-0 transition-all duration-500 ease-in-out"
  >
    <div class="w-full flex items-center mb-4">
      <button
        id="backToMainMenuFromPromo"
        class="text-[#7A5C4B] p-1 border border-[#7A5C4B] rounded-full mr-4"
      >
        <Icon name="mdi:arrow-left" size="28px" />
      </button>
      <span class="text-[#7A5C4B] font-vibes italic text-2xl">
        Promotions
      </span>
    </div>
    <div class="flex flex-col items-start space-y-4 w-full">
      <a
        href="/promo/promo-sirene"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Offre Spéciale</span>
      </a>
      <a
        href="/promo/robes-de-mariee-promotion"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Flash Vente</span>
      </a>
      <a
        href="/promo/robes-de-mariee-boheme-chic"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Promotion Festive</span>
      </a>
      <a
        href="/promo/robes-de-mariees-destockage"
        class="flex items-center gap-3 hover:text-[#A37B63] transition w-full"
      >
        <span class="text-xl">Destockage</span>
      </a>
    </div>
  </div>
</header>

<!-- JavaScript en defer pour gérer l'ouverture/fermeture des menus -->
<script defer>
  document.addEventListener("DOMContentLoaded", () => {
    const mobileMenu = document.getElementById("mobileMenu");
    const mobileMenuBtn = document.getElementById("mobileMenuBtn");
    const closeMobileMenu = document.getElementById("closeMobileMenu");

    const mobileSubmenu = document.getElementById("mobileSubmenu");
    const openMobileSubmenu = document.getElementById("openMobileSubmenu");
    const backToMainMenu = document.getElementById("backToMainMenu");

    const mobilePromoSubmenu = document.getElementById("mobilePromoSubmenu");
    const openMobilePromoSubmenu = document.getElementById(
      "openMobilePromoSubmenu"
    );
    const backToMainMenuFromPromo = document.getElementById(
      "backToMainMenuFromPromo"
    );

    // Ouvrir le menu mobile principal
    mobileMenuBtn.addEventListener("click", () => {
      mobileMenu.classList.remove("translate-y-full", "opacity-0");
      mobileMenu.classList.add("translate-y-0", "opacity-100");
      document.body.style.overflow = "hidden"; // Bloque le scroll en arrière-plan
    });

    // Fermer le menu mobile principal
    closeMobileMenu.addEventListener("click", () => {
      // Fermer d'abord les sous-menus s'ils sont ouverts
      if (!mobileSubmenu.classList.contains("translate-x-full")) {
        mobileSubmenu.classList.remove("translate-x-0", "opacity-100");
        mobileSubmenu.classList.add("translate-x-full", "opacity-0");
      }
      if (!mobilePromoSubmenu.classList.contains("translate-x-full")) {
        mobilePromoSubmenu.classList.remove("translate-x-0", "opacity-100");
        mobilePromoSubmenu.classList.add("translate-x-full", "opacity-0");
      }
      mobileMenu.classList.remove("translate-y-0", "opacity-100");
      mobileMenu.classList.add("translate-y-full", "opacity-0");
      document.body.style.overflow = "";
    });

    // Ouvrir le sous-menu "Robes de Mariée"
    openMobileSubmenu.addEventListener("click", () => {
      mobileMenu.classList.remove("translate-y-0", "opacity-100");
      mobileMenu.classList.add("translate-y-full", "opacity-0");

      mobileSubmenu.classList.remove("translate-x-full", "opacity-0");
      mobileSubmenu.classList.add("translate-x-0", "opacity-100");
    });

    // Revenir du sous-menu "Robes de Mariée" au menu principal
    backToMainMenu.addEventListener("click", () => {
      mobileSubmenu.classList.remove("translate-x-0", "opacity-100");
      mobileSubmenu.classList.add("translate-x-full", "opacity-0");

      mobileMenu.classList.remove("translate-y-full", "opacity-0");
      mobileMenu.classList.add("translate-y-0", "opacity-100");
    });

    // Ouvrir le sous-menu "Promotions"
    openMobilePromoSubmenu.addEventListener("click", () => {
      mobileMenu.classList.remove("translate-y-0", "opacity-100");
      mobileMenu.classList.add("translate-y-full", "opacity-0");

      mobilePromoSubmenu.classList.remove("translate-x-full", "opacity-0");
      mobilePromoSubmenu.classList.add("translate-x-0", "opacity-100");
    });

    // Revenir du sous-menu "Promotions" au menu principal
    backToMainMenuFromPromo.addEventListener("click", () => {
      mobilePromoSubmenu.classList.remove("translate-x-0", "opacity-100");
      mobilePromoSubmenu.classList.add("translate-x-full", "opacity-0");

      mobileMenu.classList.remove("translate-y-full", "opacity-0");
      mobileMenu.classList.add("translate-y-0", "opacity-100");
    });
  });
</script>
