---
import { Icon } from "astro-icon/components";

// Palette de couleurs Monica Mariage
const primaryColor = "bg-[#a77c60]"; // Marron principal
---

<!-- Bouton pour ouvrir le modal -->
<button
  class="open-modal-button inline-block px-8 py-4 bg-[#C99A9A] text-white font-medium text-lg
  rounded-full shadow-md hover:shadow-lg hover:scale-105 hover:bg-[#C27C74]
  transition-all duration-300"
>
  <span>Prendre rendez-vous</span>
</button>

<!-- Fenêtre modale de contact -->
<div class="contact-modal fixed inset-0 z-[500] hidden">
  <!-- Overlay avec flou -->
  <div class="absolute inset-0 bg-black/20 backdrop-blur-sm"></div>

  <!-- Contenu de la modale -->
  <div
    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-2xl shadow-xl p-8 transform transition-all"
  >
    <!-- En-tête avec titre et bouton de fermeture -->
    <div
      class="flex justify-between items-center mb-6 border-b border-[#F0E6E2] pb-4"
    >
      <h2 class="font-vibes text-3xl text-[#af7749]">Prenons contact</h2>
      <button
        class="close-modal-button rounded-full w-8 h-8 flex items-center justify-center text-[#8B7569] hover:bg-[#FDF8F7] transition-colors"
        aria-label="Fermer"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <!-- Corps de la modale -->
    <div class="text-center mb-8">
      <!-- Séparateur décoratif -->
      <div class="flex items-center justify-center gap-4 mb-4">
        <span class="h-px w-12 bg-[#C5A880]"></span>
        <p class="text-[#8B7569] text-xs font-medium">CONTACTEZ-NOUS</p>
        <span class="h-px w-12 bg-[#C5A880]"></span>
      </div>
      <p class="text-[#5F4B3F] leading-relaxed mb-6 text-base md:text-lg">
        Nous sommes disponibles sur plusieurs plateformes, choisissez votre
        moyen de communication préféré :
      </p>
    </div>

    <!-- Boutons de contact -->
    <div class="space-y-3">
      <a
        target="_blank"
        href="tel:+33668300960"
        class="flex items-center justify-center bg-[#af7749] text-white p-4 rounded-full w-full hover:bg-[#925c36] transition-all duration-300 group"
      >
        <div
          class="w-8 h-8 mr-3 flex items-center justify-center bg-white/20 rounded-full"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
            ></path>
          </svg>
        </div>
        <span class="font-medium">Appelez-moi</span>
      </a>
      <a
        target="_blank"
        href="https://wa.me/33668300960?text=Bonjour%20Monica%20Mariage%20!"
        class="flex items-center justify-center bg-[#25D366] text-white p-4 rounded-full w-full hover:bg-[#1faa54] transition-all duration-300 group"
      >
        <div
          class="w-8 h-8 mr-3 flex items-center justify-center bg-white/20 rounded-full"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"
            ></path>
          </svg>
        </div>
        <span class="font-medium">WhatsApp</span>
      </a>
      <a
        target="_blank"
        href="https://www.instagram.com/monicamariage/"
        class="flex items-center justify-center bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] text-white p-4 rounded-full w-full hover:opacity-90 transition-all duration-300 group"
      >
        <div
          class="w-8 h-8 mr-3 flex items-center justify-center bg-white/20 rounded-full"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
          </svg>
        </div>
        <span class="font-medium">Instagram</span>
      </a>

      <!-- Pied de modale -->
      <div class="mt-8 text-center">
        <p class="text-[#8B7569] text-sm">
          Nous répondons généralement dans les 24 heures
        </p>
      </div>
    </div>
  </div>
</div>

<style>
  /* Animation d'entrée et de sortie */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.9);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  .contact-modal.active {
    display: block;
    animation: fadeIn 0.3s ease forwards;
  }
  .contact-modal.active > div:last-child {
    animation: scaleIn 0.3s ease forwards;
  }
</style>

<script client:load>
  document.addEventListener("DOMContentLoaded", () => {
    const modals = document.querySelectorAll(".contact-modal");
    const openButtons = document.querySelectorAll(".open-modal-button");
    const closeButtons = document.querySelectorAll(".close-modal-button");

    openButtons.forEach((btn, index) => {
      btn.addEventListener("click", () => {
        const modal = modals[index];
        if (modal) {
          modal.classList.add("active");
          document.body.style.overflow = "hidden";
        }
      });
    });

    closeButtons.forEach((btn, index) => {
      btn.addEventListener("click", () => {
        const modal = modals[index];
        if (modal) {
          modal.classList.remove("active");
          document.body.style.overflow = "";
        }
      });
    });

    modals.forEach((modal) => {
      modal.addEventListener("click", (e) => {
        if (e.target === modal || e.target === modal.firstElementChild) {
          modal.classList.remove("active");
          document.body.style.overflow = "";
        }
      });
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        modals.forEach((modal) => {
          if (modal.classList.contains("active")) {
            modal.classList.remove("active");
            document.body.style.overflow = "";
          }
        });
      }
    });
  });
</script>
