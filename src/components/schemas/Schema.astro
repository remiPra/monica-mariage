---
export interface Props {
  type?: string;
  title: string;
  description: string;
  url?: string;
  image?: string;
  businessInfo?: any;
  additionalData?: any;
}

const {
  type = "website",
  title,
  description,
  url,
  image = "/images/cover-robes.jpg",
  businessInfo = {},
  additionalData = {},
} = Astro.props;

let pageUrl;
try {
  if (url) {
    pageUrl = url;
  } else if (Astro.site) {
    pageUrl = new URL(Astro.url.pathname, Astro.site).toString();
  } else {
    pageUrl = "https://monicamariage.com" + Astro.url.pathname;
  }
} catch (error) {
  console.warn("Error creating URL:", error);
  pageUrl = "https://monicamariage.com";
}

const defaultBusinessInfo = {
  name: "Monica Mariage",
  alternateName: "MonicaMariage",
  telephone: "+33668300960",
  email: "monicamariage@hotmail.com",
  priceRange: "€€",
  address: {
    streetAddress: "1220 chemin de brouquere",
    addressLocality: "Seysses",
    addressRegion: "Occitanie",
    addressCountry: "FR",
    postalCode: "31600",
  },
  geo: {
    latitude: 43.471123,
    longitude: 1.291812,
  },
  openingHoursSpecification: [
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ],
      opens: "10:00",
      closes: "19:00",
    },
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: ["Saturday"],
      opens: "10:00",
      closes: "18:00",
    },
  ],
  sameAs: [
    "https://www.instagram.com/monicamariage/",
    "https://www.facebook.com/monicamariage/",
    "https://www.pinterest.fr/monicamariage/",
  ],
  aggregateRating: {
    "@type": "AggregateRating",
    ratingValue: "4.2",
    reviewCount: "151",
  },
  areaServed: [
    "Toulouse",
    "Montauban",
    "Albi",
    "Castres",
    "Carcassonne",
    "Narbonne",
    "Tarbes",
    "Béziers",
    "Pau",
    "Perpignan",
    "Montpellier",
    "Bordeaux",
  ],
};

const business = { ...defaultBusinessInfo, ...businessInfo };

const siteUrl = "https://monicamariage.com";

let structuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "LocalBusiness",
      "@id": `${siteUrl}#business`,
      name: business.name,
      alternateName: business.alternateName,
      description: description,
      url: siteUrl,
      telephone: business.telephone,
      email: business.email,
      priceRange: business.priceRange,
      address: {
        "@type": "PostalAddress",
        streetAddress: business.address.streetAddress,
        addressLocality: business.address.addressLocality,
        addressRegion: business.address.addressRegion,
        postalCode: business.address.postalCode,
        addressCountry: business.address.addressCountry,
      },
      geo: {
        "@type": "GeoCoordinates",
        latitude: business.geo.latitude,
        longitude: business.geo.longitude,
      },
      openingHoursSpecification: business.openingHoursSpecification,
      sameAs: business.sameAs,
      image: image,
      areaServed: business.areaServed,
      aggregateRating: business.aggregateRating,
      additionalType: "https://schema.org/BridalShop",
    },
    {
      "@type": "WebSite",
      "@id": `${siteUrl}#website`,
      url: siteUrl,
      name: "Monica Mariage - Robes de Mariée Sur-Mesure à Toulouse",
      description: "Spécialiste de la robe de mariée sur-mesure depuis 2014",
      publisher: {
        "@id": `${siteUrl}#business`,
      },
      potentialAction: {
        "@type": "SearchAction",
        target: {
          "@type": "EntryPoint",
          urlTemplate: `${siteUrl}/search?q={search_term_string}`,
        },
        "query-input": "required name=search_term_string",
      },
    },
    {
      "@type": "WebPage",
      "@id": pageUrl,
      url: pageUrl,
      name: title,
      description: description,
      isPartOf: {
        "@id": `${siteUrl}#website`,
      },
      about: {
        "@id": `${siteUrl}#business`,
      },
      inLanguage: "fr-FR",
    },
  ],
};

const jsonLD = JSON.stringify(structuredData, null, 2);
---

<script type="application/ld+json" set:html={jsonLD} />
