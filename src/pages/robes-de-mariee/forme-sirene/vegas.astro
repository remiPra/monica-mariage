---
import BreadCrumbs from '../../../components/BreadCrumbs.astro';
import Layout from '../../../layouts/Layout.astro';
import RandomDresses from '../../../components/RandomDresses.astro';
import sirene from '../../../data/forme-sirene.json';

const allRobes = [...sirene];
const randomDresses = allRobes
  .sort(() => 0.5 - Math.random())
  .slice(0, 4);

const robe = {
  "dressName": "Vegas",
  "category": "forme-sirene",
  "imageUrl": "https://static.wixstatic.com/media/176703_0254b241391f4920a72d361a486f3cf3~mv2.jpg",
  "width": 1600,
  "height": 2000,
  "optimizedImages": {
    "slider": {
      "desktop": "/images/robes/slider/desktop/monica-mariage-robe-de-mariee-sirene-vegas-9-slider-desktop.webp"
    },
    "gallery": {
      "desktop": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-vegas-9-gallery-tablet.webp",
      "extra1": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-vegas-10-gallery-tablet.webp",
      "extra2": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-vegas-11-gallery-tablet.webp",
      "extra3": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-vegas-12-gallery-tablet.webp"
    }
  },
  "title": "Robe Sirène Dentelle Monica Mariage Toulouse",
  "metaDescription": "Sublimez votre mariage avec cette magnifique robe sirène en dentelle, proposée par Monica Mariage près de Toulouse.",
  "altOptimized": "robe de mariée sirène Monica Mariage Toulouse"
};
---

<Layout title={robe.title} description={robe.metaDescription}>
  <link rel="preload" as="image" href={robe.optimizedImages.gallery.desktop} type="image/webp" fetchpriority="high" />

  <div class="mt-20 max-w-7xl mx-auto px-4 lg:px-6 flex flex-col lg:flex-row gap-10">
    
    {/* Section Image - Slider */}
    <section class="w-full lg:w-[60%]">
        <link rel="preload" as="image" href={robe.optimizedImages.gallery.desktop} type="image/webp" fetchpriority="high" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
      <BreadCrumbs />
      
      <div class="relative w-full max-w-[500px] h-[600px] mx-auto overflow-hidden">
        <div class="swiper-container rounded-2xl shadow-lg border border-[#C5A880]">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.desktop} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.extra1} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.extra2} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.extra3} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
          </div>

          {/* Navigation Arrows */}
        
        </div>
      </div>
    </section>

    {/* Section Info */}
    <section class="w-full lg:w-[40%] flex flex-col justify-center">
      <h1 class="text-4xl font-vibes text-[#af7749] mb-4">Robe de Mariée {robe.dressName}</h1>
      <p class="text-gray-700 text-lg leading-relaxed">
        Craquez pour cette sublime robe de mariée sirène signée Monica Mariage, près de Toulouse.
      </p>
      <a href="#" class="mt-6 block w-full text-center bg-[#af7749] text-white py-4 px-6 rounded-lg font-medium hover:bg-[#925c36] transition-all duration-300 text-lg">
        PRENDRE RENDEZ-VOUS
      </a>
    </section>
  </div>

  {/* Chargement différé des robes aléatoires */}
  <RandomDresses  dresses={randomDresses} />
  
  {/* SwiperJS Initialisation */}
  <script is:inline>
    document.addEventListener("DOMContentLoaded", function () {
      new Swiper(".swiper-container", {
        loop: true,
        slidesPerView: 1,
        spaceBetween: 10,
        autoplay: { delay: 3000 },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });
    });
  </script>

  {/* Custom Styles */}
  <style>
    .swiper-container {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: relative;
    }
    .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .swiper-button-next, .swiper-button-prev {
      color: #C5A880;
      transition: all 0.3s;
    }
    .swiper-button-next:hover, .swiper-button-prev:hover {
      color: #925c36;
    }
  </style>

</Layout>
