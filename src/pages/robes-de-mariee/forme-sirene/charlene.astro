---
import BreadCrumbs from '../../../components/BreadCrumbs.astro';
import Layout from '../../../layouts/Layout.astro';
import sirene from '../../../data/forme-sirene.json';

const allRobes = [...sirene];
const randomDressesz = allRobes
    .sort(() => 0.5 - Math.random())
    .slice(0, 4);
const randomDresses = randomDressesz.reduce((acc, robe) => {
  if (!acc.some((r) => r.dressName === robe.dressName)) {
    acc.push(robe);
  }
  return acc;
}, []);


const robe = {
  "dressName": "Charlène",
  "category": "forme-sirene",
  "imageUrl": "https://static.wixstatic.com/media/176703_1d98b5e15a1f4a3ab67876036cd06916~mv2.jpg",
  "width": 2100,
  "height": 2800,
  "optimizedImages": {
    "slider": {
      "desktop": "/images/robes/slider/desktop/monica-mariage-robe-de-mariee-sirene-charlene-29-slider-desktop.webp"
    },
    "gallery": {
      "desktop": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-charlene-29-gallery-tablet.webp",
      "extra1": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-charlene-30-gallery-tablet.webp",
      "extra2": "/images/robes/gallery/tablet/monica-mariage-robe-de-mariee-sirene-charlene-31-gallery-tablet.webp"
    }
  },
  "title": "Robe Sirène Dentelle Monica Mariage Toulouse",
  "metaDescription": "Découvrez cette sublime robe de mariée sirène en dentelle, parfaite pour un mariage élégant.",
  "altOptimized": "robe de mariée sirène Monica Mariage Toulouse"
};
---
<Layout title={robe.title} description={robe.metaDescription}>
  <link rel="preload" as="image" href={robe.optimizedImages.gallery.desktop} type="image/webp" fetchpriority="high" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

  <div class="mt-20 max-w-7xl mx-auto px-4 lg:px-6 flex flex-col lg:flex-row gap-10">
    
    {/* Section Image - Slider */}
    <section class="w-full lg:w-[60%]">
      <BreadCrumbs />
      
      <div class="relative w-full max-w-[500px] h-[600px] mx-auto overflow-hidden">
        <div class="swiper-container rounded-2xl shadow-lg border border-[#C5A880]">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.desktop} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.extra1} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
            <div class="swiper-slide">
              <img src={robe.optimizedImages.gallery.extra2} alt={robe.altOptimized} class="object-cover w-full h-full rounded-2xl" loading="lazy" />
            </div>
     
          </div>

          {/* Navigation Arrows */}
        
        </div>
      </div>
    </section>

    {/* Section Info */}
    <section class="w-full lg:w-[40%] flex flex-col justify-center">
      <h1 class="text-4xl font-vibes text-[#af7749] mb-4">Robe de Mariée {robe.dressName}</h1>
      <p class="text-gray-700 text-lg leading-relaxed">
        Craquez pour cette sublime robe de mariée sirène signée Monica Mariage, près de Toulouse. 
        Dentelle raffinée, manches longues transparentes ornées de motifs floraux, décolleté plongeant délicat et 
        traîne discrète pour un look à la fois romantique et moderne.
      </p>
      <a href="#" class="mt-6 block w-full text-center bg-[#af7749] text-white py-4 px-6 rounded-lg font-medium hover:bg-[#925c36] transition-all duration-300 text-lg">
        PRENDRE RENDEZ-VOUS
      </a>
    </section>
  </div>
  
<div class="max-w-7xl mb-20 mx-auto px-6 mt-20">
  <h2 class="text-[50px] font-cursive md:text-3xl font-playfair text-[#af7749] mb-8 text-center">
    Vous pourriez aussi aimer
  </h2>
  
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4">
    {randomDresses.map((dress) => (
      <a
  key={dress.id}
  href={`/robes-de-mariee/forme-sirene/${dress.dressName.replace(/\s+/g, "-").toLowerCase()}`}
  class="relative text-center overflow-hidden border-[#322d25] cursor-pointer fade-in border rounded-2xl h-[500px] shadow-md"
>
  {/* Overlay dégradé */}
  <div class="absolute w-full h-full inset-0 bg-[#af7749] opacity-20 z-10"></div>

  {/* Image */}
  <img
    src={dress.imageUrl}
    alt={dress.altOptimised || dress.dressName}
    class="absolute top-0 w-full h-full object-cover rounded hover:scale-105 transition-transform duration-300 z-[-1]"
    loading="lazy"
  />

  {/* Nouveau contenu en bas */}
  <div class="absolute bottom-0 left-0 w-full text-center bg-gradient-to-t from-[#af7749] to-transparent p-6 rounded-b-2xl z-20">
    <p class="text-white font-vibes text-4xl mb-4 drop-shadow-lg">
      {dress.dressName}
    </p>
    <button class="bg-[#C5A880] text-white font-semibold px-6 py-3 rounded-full shadow-lg hover:bg-[#A27E5D] transition-all">
      Découvrir cette robe
    </button>
  </div>
</a>

    ))}
  </div>
</div>


  {/* SwiperJS Initialisation */}
  <script is:inline>
    document.addEventListener("DOMContentLoaded", function () {
      new Swiper(".swiper-container", {
        loop: true,
        slidesPerView: 1,
        spaceBetween: 10,
        autoplay: { delay: 3000 },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });
    });
  </script>

  {/* Custom Styles */}
  <style>
    .swiper-container {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: relative;
    }
    .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .swiper-button-next, .swiper-button-prev {
      color: #C5A880;
      transition: all 0.3s;
    }
    .swiper-button-next:hover, .swiper-button-prev:hover {
      color: #925c36;
    }
  </style>
</Layout>
